extends: post.liquid

title: رمزنگاری و مخفی کردن فایل‌ها در لینوکس با Tomb
date: 15 Aug 2014 07:27:15 +0000
route: blog
---

رمزنگاری و بک‌آپ از اطلاعات مهم در هر سیستمی اهمیت داره. لینوکس به‌طور پیش‌فرض از رمزنگاری پشتیبانی میکنه و ابزارهای خوبی رو برای اینکار در اختیار کاربر قرار داده. [Tomb](https://github.com/dyne/Tomb) یک اسکریپت هست که انجام این کار رو بسیار راحت میکنه. Tomb یک پرونده رمزنگاری شده میسازه که میشه روی سیستم mount کرد و پرونده‌های مختلف رو توش قرار داد.

## مزایای Tomb
* پرونده ساخته شده با Tomb مثل یک پارتیشن معمولی است
* پرونده Tomb با یک کلید (GnuPG) قابل باز شدن است
* پرونده‌ی کلید رو میشه جدا از پرونده‌ی Tomb نگهداری کرد (مثلا روی فلش، روی یک سرور دیگه و...)
* از اونجایی که مونت کردن یک پارتیشن احتیاج به دسترسی sudo داره، پس پسورد کاربر ریشه هم لازم هست
* میشه تعداد زیادی پرونده Tomb با حجم‌های مختلف ساخت و همه رو مدیریت کرد

## چقدر امنیت داره
تنها چیزی که میشه با اطمینان در موردش صحبت کرد مرگ هست. اما Tomb امن است. سورس Tomb همیشه باز هست و با یکم دانش اسکریپت نویسی Shell میشه تغییرش داد. تمام ابزارهایی که Tomb ازش استفاده میکنه به صورت پیش‌فرض در لینوکس وجود داره، و Tomb چیزی از خودش اضافه نمی‌کنه.

## نصب
تو آرچ Tomb از طریق AUR قابل نصب هست. می‌تونید از `yaourt` یا هر مدیر بسته دیگه‌ای برای نصبش استفاده کنید. برای توزیع‌های دیگه هم به [این صفحه در مستندات Tomb](https://github.com/dyne/Tomb/blob/master/INSTALL.md) مراجعه کنید. Tomb برای نصب نیاز به `ZSH` داره.

## نحوه کار
به طور خلاصه، اول باید یک پرونده Tomb با حجم دلخواه بسازید (به همین میزان حجم میتونید داخل این پرونده، پرونده‌های مختلف خودتون رو ذخیره کنید). بعد یک کلید می‌سازید و برای کلید هم یک رمزعبور تعیین می‌کنید. و در آخر این کلید رو به پرونده Tomb متصل می‌کنید تا از این به بعد این پرونده فقط از طریق این کلید و اون رمزعبور باز خواهد شد.

برای ساخت پرونده‌ی Tomb از دستور `dig`، و از کلید `-a` هم برای مشخص کردن حجم پرونده استفاده می‌کنیم (حجم به مگابایت):

```shell
$ tomb dig -s 128 secret.tomb
```

این یک پرونده Tomb میسازه به اسم `secret.tomb` با حجم ۱۲۸ مگابایت.

حالا یک کلید میسازیم:

```shell
$ tomb forge secret.tomb.key
```

با این دستور یک کلید میسازید و در نهایت هم از شما یک رمزعبور میخواد که باید به دلخواه وارد کنید.

کلید رو به پرونده متصل میکنیم:

```shell
$ tomb lock secret.tomb -k secret.tomb.key
```

حالا برای باز کردن پرونده از دستور `open` استفاده می‌کنیم. برای باز کردن پرونده باید پرونده GPG رو هم با کلید `-k` به فرمان بدیم:

```shell
tomb open secret.tomb -k secret.tomb.key
```

برای بستن (umount) کردن پرونده از دستور `tomb close` استفاده کنید. بعدا میشه به همین ترتیب برای تغییر اندازه‌ی پرونده از دستور `resize` استفاده کرد. برای اطلاعات بیشتر `man` رو بخونید.
